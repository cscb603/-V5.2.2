# 智能高速批量图像处理工具 v4.0

## 📋 工具概述

这是一个功能强大的智能图像处理工具，能够自动识别系统配置，优化处理策略，支持 JPG/PNG/HEIC 等普通图像和 CR2/NEF/ARW 等 RAW 格式文件的高速批量处理。

## ✨ 核心功能

### 1. 系统配置智能识别



* **操作系统检测**: 自动识别 Windows/macOS/Linux

* **硬件信息检测**: CPU 核心数、GPU 型号、内存容量

* **CUDA 支持检测**: 自动检测 NVIDIA 显卡和 CUDA 支持

* **存储类型识别**: 区分 SSD 和 HDD，优化 I/O 操作

### 2. 智能加速策略



* **动态线程调整**: 根据 CPU 核心数自动调整工作线程数

* **内存优化**: 根据可用内存调整 RAW 处理参数

* **存储优化**: SSD 启用高速模式，HDD 启用稳定模式

* **算法优化**: 根据图像大小选择最优缩放算法

### 3. RAW 文件高速处理



* **多进程处理**: RAW 文件现在支持多进程并行处理

* **智能参数**: 根据系统配置自动调整 RAW 处理质量

* **格式支持**: CR2、NEF、ARW、DNG、RAW、RAF、RW2、SRW 等

### 4. 同名文件智能处理



* **自动去重**: 当存在同名 JPG+RAW 文件时，自动选择处理 JPG

* **质量优先**: 选择同组中文件最大的进行处理

* **跳过机制**: 智能跳过重复文件，避免冗余处理

### 5. 方向识别优化



* **EXIF 解析**: 准确读取 EXIF 方向信息

* **智能检测**: 备用的智能方向检测算法

* **双重保障**: 提高方向识别的准确性和可靠性

## 🚀 使用方法

### 图形界面模式（推荐）



1. 运行程序: `python 智能高速图像处理工具``v4.py`

2. 选择输入文件夹（包含要处理的图像）

3. 选择输出文件夹（处理后的图像保存位置）

4. 设置处理参数（可选）

5. 点击 "开始处理" 按钮

### 命令行模式



```
python 智能高速图像处理工具v4.py <输入目录> <输出目录> \[--max-side <像素>] \[--quality <1-100>]
```

## ⚙️ 处理参数



| 参数      | 说明              | 默认值  | 范围      |
| ------- | --------------- | ---- | ------- |
| 最大边长    | 处理后图像的最大边长（像素）  | 2000 | 1-10000 |
| JPG 画质  | 输出 JPG 文件的质量    | 90   | 1-100   |
| 图像线程数   | 处理普通图像的并行线程数    | 自动   | 1-16    |
| RAW 线程数 | 处理 RAW 文件的并行线程数 | 自动   | 1-8     |

## 📊 支持的文件格式

### 普通图像格式



* JPG/JPEG

* PNG

* HEIC/HEIF

* BMP

* GIF

* TIFF

### RAW 格式



* Canon: CR2

* Nikon: NEF

* Sony: ARW

* Adobe: DNG

* Panasonic: RAW

* Fujifilm: RAF

* Panasonic: RW2

* Samsung: SRW

## 🛠️ 安装说明

### 自动安装（推荐）



```
python install\_dependencies.py
```

### 手动安装



```
pip install Pillow>=10.0.0 rawpy>=0.19.0 numpy>=1.24.0 exiftool>=0.4.0 psutil>=5.9.0
```

### Windows 额外依赖



```
pip install pywin32>=306
```

### macOS 额外依赖



```
pip install pyobjc>=9.0
```

## 🔧 系统要求

### 最低配置



* Python 3.8 或更高版本

* 4GB 内存

* 10GB 可用磁盘空间

* CPU: 双核处理器

### 推荐配置



* Python 3.10 或更高版本

* 8GB 内存或更多

* SSD 存储

* 四核处理器或更高

## 📈 性能优化建议



1. **使用 SSD 存储**: SSD 比 HDD 快 3-5 倍

2. **关闭其他程序**: 释放更多内存和 CPU 资源

3. **合理设置线程数**: 根据 CPU 核心数调整

4. **分批处理**: 大量文件建议分批处理

5. **监控温度**: 长时间处理注意 CPU 温度

## 📝 处理报告

处理完成后会在输出目录生成`processing_report.txt`文件，包含：



* 处理时间和统计信息

* 成功 / 失败 / 跳过文件列表

* 详细的错误信息（如有）

## ⚠️ 注意事项



1. **备份重要文件**: 建议在处理前备份原始图像

2. **磁盘空间**: 确保输出目录有足够的可用空间

3. **RAW 处理**: RAW 文件处理需要更多内存和时间

4. **网络连接**: 首次运行可能需要下载依赖包

5. **权限问题**: 确保对输入输出目录有读写权限

## 🔒 隐私保护

本工具在本地运行，不会上传任何图像文件到互联网，确保数据安全。

## 🐛 常见问题

### Q: 程序启动失败怎么办？

A: 检查 Python 版本和依赖包是否正确安装

### Q: RAW 文件处理失败？

A: 检查是否安装了 rawpy 库，确保内存充足

### Q: 方向识别不准确？

A: 尝试使用不同的方向检测模式，或手动调整

### Q: 处理速度很慢？

A: 检查是否使用 HDD，尝试减少线程数，关闭其他程序

## 🤝 技术支持

如遇到问题，请检查：



1. 系统配置是否满足要求

2. 依赖包是否正确安装

3. 输入输出路径是否正确

4. 图像文件是否损坏



***

**版本**: v4.0

**更新日期**: 2025 年 11 月

**作者**: 星TAP
